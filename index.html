<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Yu-Cheng</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="libs/bootstrap@5.0.2/bootstrap.min.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/style_loader.css" rel="stylesheet" />
    <link href="css/style_tablet.css" rel="stylesheet" />
    <link href="css/style_mobile.css" rel="stylesheet" />
</head>

<body style="max-width: 99%">
    <!-- Top Layer -->
    <div class="row">
        <div class="col-md-12 mb-4 mt-4"></div>
    </div>
    <!-- Second Layer: Title -->
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-1 d-flex justify-content-center align-items-center">
            <img src="assets/img/personal-photo.jpg" class="rounded-circle img-fluid personal-photo">
        </div>
        <div class="col-md-5">
            <h1 class="site-heading text-center text-faded d-lg-block">
                <p class="site-heading-upper">The Resume & Creations </p>
                <span class="site-heading-lower">of Yu-Cheng, Kuo</span>
            </h1>
        </div>
        <div class="col-md-3"></div>
    </div>
    <!-- Layer 3: Navigation -->
    <div class="row mb-5">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <nav class="navbar navbar-expand-lg navbar-light mainNav">
                <div class="container-fluid">
                    <!-- Navbar Toggler Button -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <!-- Navbar Content -->
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mx-auto">
                            <!-- Navbar Items -->
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="home.html">Home</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="resume.html">Resume</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="experience.html">Experience</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="research.html">Research</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="skills.html">Skills</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="portfolio.html">Portfolio</a>
                            </li>
                            <li class="nav-item fs-5 me-4">
                                <a class="nav-link text-uppercase load-page" href="#" data-page="contact.html">Contact</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div class="col-md-1"></div>
    </div>
    <!-- Dynamic Content Section -->
    <div class='row my-5'>
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <section id="dynamic-content">
                <!-- load page -->
            </section>
        </div>
        <div class="col-md-1"></div>
    </div>
    <!-- Footer Section -->
    <div class='row mt-5'>
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <footer class="footer text-center py-2 my-5">
                <p class="m-0 small">Copyright &copy; Yu-Cheng, Kuo 2024</p>
            </footer>
        </div>
        <div class="col-md-1"></div>
    </div>
    <!-- Loader -->
    <div id="loader" style="display: none;">
        <div class="cs-loader">
            <div class="cs-loader-inner">
                <label>Y</label>
                <label>u</label>
                <label>c</label>
                <label>h</label>
                <label>e</label>
                <label>n</label>
                <label>g</label>
            </div>
        </div>
    </div>
</body>
<!-- Bootstrap core JS-->
<script src="./libs/bootstrap@5.0.2/bootstrap.bundle.min.js"></script>
<!-- JQuery core JS-->
<script src="./libs/jquery@3.7.1/jquery.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    // Mapping object to map each page to corresponding CSS and JavaScript files
    const pageResourceMapping = {
        'resume.html': {
            css: ['css/style_resume.css'],
            js: ['js/resume_pdfobject.js']
        },
        'experience.html': {
            css: ['css/style_experience.css'],
            js: []
        },
        // 'research.html': {
        //     css: ['css/Research_1.css', 'css/Research_2.css'],
        //     js: ['js/Research_1.js']
        // },
        // 'skills.html': {
        //     css: ['css/Skills_1.css'],
        //     js: ['js/Skills_1.js']
        // },
        // 'portfolio.html': {
        //     css: ['css/Portfolio_1.css'],
        //     js: ['js/Portfolio_1.js']
        // },
        // 'contact.html': {
        //     css: ['css/Contact_1.css'],
        //     js: ['js/Contact_1.js']
        // }
        // Add other pages and their corresponding CSS and JavaScript files here
    };

    // Automatically load home.html when the page is loaded
    loadPage('./pages/home.html');

    // Load different pages when navigation buttons are clicked
    $('.load-page').on('click', function(e) {
        e.preventDefault();
        var page = $(this).data('page'); // Get the page from the data attribute
        loadPage('./pages/' + page);
    });

    // Function to dynamically load pages using jQuery's ajax method
    function loadPage(page) {
        $('#loader').show(); // Show the loader

        // Remove previously loaded CSS and JavaScript files
        removePreviousResources();

        $.ajax({
            url: page,
            method: 'GET',
            success: function(data) {
                // Inject the loaded content
                $('#dynamic-content').html(data);

                // Load specific CSS and JavaScript for this page based on the mapping
                loadMappedResources(page);

                // Hide the loader after content is loaded
                $('#loader').hide();
            },
            error: function() {
                $('#dynamic-content').html('<p>Sorry, unable to load content.</p>');
                $('#loader').hide(); // Hide the loader in case of error
            }
        });
    }

    // Function to remove previously loaded CSS and JavaScript files
    function removePreviousResources() {
        // Remove CSS files that have the data attribute 'dynamic-resource'
        $('link[data-dynamic-resource="true"]').remove();

        // Remove JavaScript files that have the data attribute 'dynamic-resource'
        $('script[data-dynamic-resource="true"]').each(function() {
            // Remove the script tag
            $(this).remove();
        });
    }

    // Function to load mapped CSS and JavaScript files based on the current page
    function loadMappedResources(page) {
        // Extract the page name from the path
        var pageName = page.split('/').pop();

        // Check if the page has mapped resources (CSS and JS files)
        if (pageResourceMapping.hasOwnProperty(pageName)) {
            const resources = pageResourceMapping[pageName];

            // Load all mapped CSS files for the page
            if (resources.css) {
                resources.css.forEach(function(cssFile) {
                    // Check if the CSS file is already included
                    if (!$('link[href="' + cssFile + '"]').length) {
                        // If not included, add the link tag to the head
                        $('<link>', {
                            rel: 'stylesheet',
                            href: cssFile,
                            'data-dynamic-resource': 'true' // Add attribute to identify it for future removal
                        }).appendTo('head');
                    }
                });
            }

            // Load all mapped JavaScript files for the page
            if (resources.js) {
                resources.js.forEach(function(jsFile) {
                    // Check if the JavaScript file is already included
                    if (!$('script[src="' + jsFile + '"]').length) {
                        // If not included, dynamically load the JavaScript file
                        $.getScript(jsFile).done(function(script, textStatus) {
                            // Optionally: add attribute to identify it for future removal
                            $('script[src="' + jsFile + '"]').attr('data-dynamic-resource', 'true');
                        });
                    }
                });
            }
        }
    }
});
</script>

</html>